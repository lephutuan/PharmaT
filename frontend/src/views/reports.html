<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Qu·∫£n L√Ω Ti·ªám Thu·ªëc T·ª± ƒê·ªông - B√°o C√°o</title>
    <link rel="stylesheet" href="../assets/css/reports.css" />
    <link rel="stylesheet" href="../assets/css/common-responsive.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar">
      <div class="menu-toggle" onclick="toggleSidebar()">
        <i class="fa-solid fa-bars"></i>
      </div>
      <div class="logo">
        <a href="../../../index.html">
          <img
            src="../assets/images/logo.png"
            alt="PharmaT Logo"
            class="logo-img"
          />
        </a>
      </div>
      <div class="page-title">
        <h1>B√°o c√°o & Th·ªëng k√™</h1>
      </div>
    </nav>

    <!-- Sidebar -->
    <aside class="sidebar">
      <ul>
        <li>
          <a href="../../../index.html" onclick="setActive(this)"
            >üè† Trang ch·ªß</a
          >
        </li>
        <li>
          <a href="warehouse.html" onclick="setActive(this)">üì¶ Kho thu·ªëc</a>
        </li>
        <li>
          <a href="prescriptions.html" onclick="setActive(this)"
            >üìù ƒê∆°n thu·ªëc</a
          >
        </li>
        <li>
          <a href="employees.html" onclick="setActive(this)">üë• Nh√¢n vi√™n</a>
        </li>
        <li>
          <a href="members.html" onclick="setActive(this)">üíé H·ªôi vi√™n</a>
        </li>
        <li>
          <a href="checkout.html" onclick="setActive(this)">üí≥ Thanh to√°n</a>
        </li>
        <li>
          <a href="reports.html" onclick="setActive(this)" class="active"
            >üìà B√°o c√°o & Th·ªëng k√™</a
          >
        </li>
        <li>
          <a href="chatbox.html" onclick="setActive(this)"
            >ü§ñ Chatbox c·∫£nh b√°o</a
          >
        </li>
      </ul>

      <!-- Logout Button -->
      <div class="sidebar-footer">
        <a href="login.html" class="logout-btn" onclick="logout()">
          <i class="fa-solid fa-sign-out-alt"></i>
          ƒêƒÉng xu·∫•t
        </a>
      </div>
    </aside>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" onclick="closeSidebar()"></div>

    <!-- Main Content -->
    <main>
      <!-- Header: Filters -->
      <div class="report-header">
        <div class="filters">
          <div class="filter-group">
            <label for="timeFilter">B·ªô l·ªçc th·ªùi gian:</label>
            <select id="timeFilter" onchange="updateReports()">
              <option value="today">H√¥m nay</option>
              <option value="week">Tu·∫ßn n√†y</option>
              <option value="month" selected>Th√°ng n√†y</option>
              <option value="quarter">Qu√Ω n√†y</option>
              <option value="year">NƒÉm n√†y</option>
              <option value="custom">T√πy ch·ªânh</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="reportType">Lo·∫°i b√°o c√°o:</label>
            <select id="reportType" onchange="updateReports()">
              <option value="overview" selected>T·ªïng quan</option>
              <option value="sales">B√°n h√†ng</option>
              <option value="inventory">T·ªìn kho</option>
              <option value="financial">T√†i ch√≠nh</option>
            </select>
          </div>
          <div
            class="filter-group custom-date"
            id="customDateRange"
            style="display: none"
          >
            <input type="date" id="startDate" />
            <span>ƒë·∫øn</span>
            <input type="date" id="endDate" />
            <button onclick="applyCustomDate()">√Åp d·ª•ng</button>
          </div>
        </div>
      </div>

      <!-- Quick Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card revenue">
          <div class="stat-icon">
            <i class="fas fa-dollar-sign"></i>
          </div>
          <div class="stat-content">
            <h3 id="totalRevenue">12.5M</h3>
            <p>Doanh thu th√°ng</p>
            <span class="stat-change positive">+15.3%</span>
          </div>
        </div>
        <div class="stat-card orders">
          <div class="stat-icon">
            <i class="fas fa-receipt"></i>
          </div>
          <div class="stat-content">
            <h3 id="totalOrders">567</h3>
            <p>S·ªë h√≥a ƒë∆°n</p>
            <span class="stat-change positive">+8.2%</span>
          </div>
        </div>
        <div class="stat-card inventory">
          <div class="stat-icon">
            <i class="fas fa-boxes"></i>
          </div>
          <div class="stat-content">
            <h3 id="totalInventory">1,234</h3>
            <p>T·ªìn kho hi·ªán t·∫°i</p>
            <span class="stat-change negative">-2.1%</span>
          </div>
        </div>
        <div class="stat-card expiring">
          <div class="stat-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <div class="stat-content">
            <h3 id="expiringMeds">23</h3>
            <p>Thu·ªëc s·∫Øp h·∫øt h·∫°n</p>
            <span class="stat-change warning">C·∫ßn ch√∫ √Ω</span>
          </div>
        </div>
      </div>

      <!-- Charts Row 1 -->
      <div class="charts-row">
        <div class="chart-container">
          <div class="chart-header">
            <h3>üìä Doanh thu theo th·ªùi gian</h3>
            <div class="chart-controls">
              <button
                class="chart-btn active"
                onclick="switchRevenueChart('daily')"
              >
                Ng√†y
              </button>
              <button class="chart-btn" onclick="switchRevenueChart('weekly')">
                Tu·∫ßn
              </button>
              <button class="chart-btn" onclick="switchRevenueChart('monthly')">
                Th√°ng
              </button>
            </div>
          </div>
          <canvas id="revenueChart"></canvas>
        </div>
        <div class="chart-container">
          <div class="chart-header">
            <h3>üèÜ Top thu·ªëc b√°n ch·∫°y</h3>
            <div class="chart-controls">
              <button
                class="chart-btn active"
                onclick="switchTopMeds('quantity')"
              >
                S·ªë l∆∞·ª£ng
              </button>
              <button class="chart-btn" onclick="switchTopMeds('revenue')">
                Doanh thu
              </button>
            </div>
          </div>
          <div class="top-medicines-list">
            <div class="medicine-item">
              <div class="medicine-info">
                <img src="../assets/images/paracetamol.png" alt="Paracetamol" />
                <div>
                  <h4>Paracetamol 500mg</h4>
                  <p>234 h·ªôp b√°n</p>
                </div>
              </div>
              <div class="medicine-revenue">2.8M VNƒê</div>
            </div>
            <div class="medicine-item">
              <div class="medicine-info">
                <img src="../assets/images/amoxicillin.jpg" alt="Amoxicillin" />
                <div>
                  <h4>Amoxicillin 250mg</h4>
                  <p>189 h·ªôp b√°n</p>
                </div>
              </div>
              <div class="medicine-revenue">1.9M VNƒê</div>
            </div>
            <div class="medicine-item">
              <div class="medicine-info">
                <img src="../assets/images/omeprazole.jpg" alt="Omeprazole" />
                <div>
                  <h4>Omeprazole 20mg</h4>
                  <p>156 h·ªôp b√°n</p>
                </div>
              </div>
              <div class="medicine-revenue">1.6M VNƒê</div>
            </div>
            <div class="medicine-item">
              <div class="medicine-info">
                <img src="../assets/images/vitamin_c.jpg" alt="Vitamin C" />
                <div>
                  <h4>Vitamin C 1000mg</h4>
                  <p>143 h·ªôp b√°n</p>
                </div>
              </div>
              <div class="medicine-revenue">1.2M VNƒê</div>
            </div>
            <div class="medicine-item">
              <div class="medicine-info">
                <img src="../assets/images/efferalgan.jpg" alt="Efferalgan" />
                <div>
                  <h4>Efferalgan 500mg</h4>
                  <p>128 h·ªôp b√°n</p>
                </div>
              </div>
              <div class="medicine-revenue">1.1M VNƒê</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Charts Row 2 -->
      <div class="charts-row">
        <div class="chart-container">
          <div class="chart-header">
            <h3>ü•ß T·ªâ l·ªá nh√≥m thu·ªëc</h3>
          </div>
          <canvas id="medicineGroupChart"></canvas>
          <div class="chart-legend">
            <div class="legend-item">
              <span class="legend-color" style="background: #3b82f6"></span>
              <span>Thu·ªëc k√™ ƒë∆°n (45%)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: #10b981"></span>
              <span>Thu·ªëc kh√¥ng k√™ ƒë∆°n (30%)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: #f59e0b"></span>
              <span>Th·ª±c ph·∫©m ch·ª©c nƒÉng (15%)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: #ef4444"></span>
              <span>D·ª•ng c·ª• y t·∫ø (10%)</span>
            </div>
          </div>
        </div>
        <div class="chart-container">
          <div class="chart-header">
            <h3>üì¶ Nh·∫≠p h√†ng theo th·ªùi gian</h3>
          </div>
          <canvas id="inventoryChart"></canvas>
        </div>
      </div>

      <!-- Detailed Data Table -->
      <div class="data-table-container">
        <div class="table-header">
          <h3>üìã B·∫£ng d·ªØ li·ªáu chi ti·∫øt</h3>
          <div class="table-controls">
            <input
              type="text"
              id="searchTable"
              placeholder="T√¨m ki·∫øm..."
              onkeyup="filterTable()"
            />
            <select id="tableFilter" onchange="filterTable()">
              <option value="all">T·∫•t c·∫£</option>
              <option value="high">Doanh thu cao</option>
              <option value="medium">Doanh thu trung b√¨nh</option>
              <option value="low">Doanh thu th·∫•p</option>
            </select>
            <button onclick="exportTable()">
              <i class="fas fa-download"></i> Xu·∫•t Excel
            </button>
          </div>
        </div>
        <div class="table-wrapper">
          <table id="detailTable">
            <thead>
              <tr>
                <th onclick="sortTable(0)">Ng√†y <i class="fas fa-sort"></i></th>
                <th onclick="sortTable(1)">
                  Doanh thu <i class="fas fa-sort"></i>
                </th>
                <th onclick="sortTable(2)">
                  S·ªë h√≥a ƒë∆°n <i class="fas fa-sort"></i>
                </th>
                <th onclick="sortTable(3)">
                  Nh√¢n vi√™n <i class="fas fa-sort"></i>
                </th>
                <th onclick="sortTable(4)">
                  Ghi ch√∫ <i class="fas fa-sort"></i>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>21/08/2025</td>
                <td>1,250,000 VNƒê</td>
                <td>23</td>
                <td>Nguy·ªÖn VƒÉn A</td>
                <td>Ca s√°ng</td>
              </tr>
              <tr>
                <td>20/08/2025</td>
                <td>980,000 VNƒê</td>
                <td>18</td>
                <td>Tr·∫ßn Th·ªã B</td>
                <td>Ca chi·ªÅu</td>
              </tr>
              <tr>
                <td>19/08/2025</td>
                <td>1,450,000 VNƒê</td>
                <td>28</td>
                <td>L√™ VƒÉn C</td>
                <td>Ca t·ªëi</td>
              </tr>
              <tr>
                <td>18/08/2025</td>
                <td>750,000 VNƒê</td>
                <td>15</td>
                <td>Ph·∫°m Th·ªã D</td>
                <td>Ca s√°ng</td>
              </tr>
              <tr>
                <td>17/08/2025</td>
                <td>1,120,000 VNƒê</td>
                <td>21</td>
                <td>Ho√†ng VƒÉn E</td>
                <td>Ca chi·ªÅu</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="table-pagination">
          <button onclick="previousPage()">¬´ Tr∆∞·ªõc</button>
          <span id="pageInfo">Trang 1 / 5</span>
          <button onclick="nextPage()">Sau ¬ª</button>
        </div>
      </div>

      <!-- Alerts Section -->
      <div class="alerts-section">
        <div class="alert-container expiring-alert">
          <div class="alert-header">
            <h3>‚ö†Ô∏è C·∫£nh b√°o thu·ªëc s·∫Øp h·∫øt h·∫°n</h3>
            <span class="alert-count">23 s·∫£n ph·∫©m</span>
          </div>
          <div class="alert-list">
            <div class="alert-item critical">
              <img src="../assets/images/paracetamol.png" alt="Paracetamol" />
              <div class="alert-info">
                <h4>Paracetamol 500mg</h4>
                <p>H·∫øt h·∫°n: 25/08/2025 (4 ng√†y)</p>
                <span class="alert-quantity">S·ªë l∆∞·ª£ng: 45 h·ªôp</span>
              </div>
              <div class="alert-status critical">Kh·∫©n c·∫•p</div>
            </div>
            <div class="alert-item warning">
              <img src="../assets/images/amoxicillin.jpg" alt="Amoxicillin" />
              <div class="alert-info">
                <h4>Amoxicillin 250mg</h4>
                <p>H·∫øt h·∫°n: 02/09/2025 (12 ng√†y)</p>
                <span class="alert-quantity">S·ªë l∆∞·ª£ng: 28 h·ªôp</span>
              </div>
              <div class="alert-status warning">C·∫£nh b√°o</div>
            </div>
            <div class="alert-item warning">
              <img src="../assets/images/vitamin_c.jpg" alt="Vitamin C" />
              <div class="alert-info">
                <h4>Vitamin C 1000mg</h4>
                <p>H·∫øt h·∫°n: 15/09/2025 (25 ng√†y)</p>
                <span class="alert-quantity">S·ªë l∆∞·ª£ng: 67 h·ªôp</span>
              </div>
              <div class="alert-status warning">C·∫£nh b√°o</div>
            </div>
          </div>
          <button class="view-all-btn" onclick="viewAllExpiring()">
            Xem t·∫•t c·∫£
          </button>
        </div>

        <div class="alert-container stock-alert">
          <div class="alert-header">
            <h3>üì¶ C·∫£nh b√°o t·ªìn kho th·∫•p</h3>
            <span class="alert-count">15 s·∫£n ph·∫©m</span>
          </div>
          <div class="alert-list">
            <div class="alert-item critical">
              <img src="../assets/images/omeprazole.jpg" alt="Omeprazole" />
              <div class="alert-info">
                <h4>Omeprazole 20mg</h4>
                <p>T·ªìn kho: 8 h·ªôp</p>
                <span class="alert-quantity">M·ª©c t·ªëi thi·ªÉu: 50 h·ªôp</span>
              </div>
              <div class="alert-status critical">H·∫øt h√†ng</div>
            </div>
            <div class="alert-item warning">
              <img src="../assets/images/efferalgan.jpg" alt="Efferalgan" />
              <div class="alert-info">
                <h4>Efferalgan 500mg</h4>
                <p>T·ªìn kho: 23 h·ªôp</p>
                <span class="alert-quantity">M·ª©c t·ªëi thi·ªÉu: 30 h·ªôp</span>
              </div>
              <div class="alert-status warning">S·∫Øp h·∫øt</div>
            </div>
            <div class="alert-item warning">
              <img src="../assets/images/betadine.jpg" alt="Betadine" />
              <div class="alert-info">
                <h4>Betadine 30ml</h4>
                <p>T·ªìn kho: 15 h·ªôp</p>
                <span class="alert-quantity">M·ª©c t·ªëi thi·ªÉu: 25 h·ªôp</span>
              </div>
              <div class="alert-status warning">S·∫Øp h·∫øt</div>
            </div>
          </div>
          <button class="view-all-btn" onclick="viewAllLowStock()">
            Xem t·∫•t c·∫£
          </button>
        </div>
      </div>
    </main>

    <script src="../assets/js/sidebar.js"></script>
    <script src="../assets/js/reports.js"></script>
  </body>
</html>
